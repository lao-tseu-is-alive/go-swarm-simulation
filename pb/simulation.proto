syntax = "proto3";

package pb;

option go_package = "github.com/lao-tseu-is-alive/go-swarm-simulation/pb";

// Sent by the World to tell actors to update their state
message Tick {
  int64 delta_time = 1; // Time elapsed since last frame
}

// Sent by the World to ask for current status
message GetState {}

// The response containing the actor's data
message ActorState {
  string id = 1;
  string color = 2; // "RED" or "BLUE"
  double position_x = 3;
  double position_y = 4;
  double velocity_x = 5;
  double velocity_y = 6;
}
// Perception is sent by the world to tell an actor what neighbors are visible
message Perception {
  repeated ActorState targets = 1;
  repeated ActorState friends = 2;
}

// Convert message is the command to switch teams
message Convert {
  string target_color = 1;
}

// Sent by Individual -> World
message ReportStatus {
  ActorState state = 1;
}

// Sent by World -> UI (via channel, or actor if UI is an actor)
message WorldSnapshot {
  repeated ActorState actors = 1;
  int32 red_count = 2;
  int32 blue_count = 3;
  bool is_game_over = 4;
  string winner = 5;
}

// UpdateConfig Simple struct to update config (can be moved to proto)
message UpdateConfig {
	double DetectionRadius = 1;
	double DefenseRadius   = 2;
}
